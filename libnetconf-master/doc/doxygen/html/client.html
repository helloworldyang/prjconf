<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>libnetconf: Client</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="usage.html">Using libnetconf</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="client">Client </a></h1><h2><a class="anchor" id="client-workflow">
Client Workflow</a></h2>
<p>Here is a description of using libnetconf functions in a NETCONF client:</p>
<ol type="1">
<li>**Set verbosity (optional)**.<br/>
 The verbosity of the libnetconf can be set by <a class="el" href="d3/d35/group__gen_a_p_i.html#gadd8fd7b3bb2e7cba580c9a4229fe02d7" title="Set libnetconf&#39;s verbosity level.">nc_verbosity()</a>. By default, libnetconf is completely silent.<br/>
 There is a default message-printing function that writes messages on stderr. The application's specific message printing function can be set via <a class="el" href="d3/d35/group__gen_a_p_i.html#ga806dfa9c27d2b8076bae21bcd549cce7" title="Set a callback function for printing libnetconf&#39;s messages.If the func parameter...">nc_callback_print()</a> function.</li>
<li>**Set SSH authentication methods priorities (optional)**.<br/>
 libnetconf supports several SSH authentication methods for connecting to a NETCONF server over SSH. However, the used method is selected from a list of supported authentication methods provided by the server. Client is allowed to specify the priority of each supported authentication method via <a class="el" href="db/d52/group__session.html#ga13119fdaa84544bf254bdb35ffdf83e0" title="Set the preference of the SSH authentication methods.">nc_ssh_pref()</a> function. The authentication method can also be disabled using a negative priority value.<br/>
 Default priorities are following:<ul>
<li>*Interactive* (value 3)</li>
<li>*Password* (value 2)</li>
<li>*Public keys* (value 1)</li>
</ul>
</li>
<li>**Set your own callback(s) for the SSH authentication methods (optional)**.<br/>
 User credentials are received via the callback functions specific for each authentication method. There are default callbacks, but application can set their own via:<ul>
<li>*Interactive* - <a class="el" href="db/d52/group__session.html#ga621c3e008285991ba00007f8d44730c0" title="Set a callback function for passing user credentials into the libssh&#39;s keyboard-interactive...">nc_callback_sshauth_interactive()</a></li>
<li>*Password* - <a class="el" href="db/d52/group__session.html#ga28299d575ef4e234ed96bad5c4f086fb" title="Set a callback function for passing the user password into the libssh&#39;s password...">nc_callback_sshauth_password()</a></li>
<li>*Publuc keys* - <a class="el" href="db/d52/group__session.html#ga81ef9b1c1949bbffd86cbfd9aa159726" title="Set a callback function for passing the user password into the libssh&#39;s publickey...">nc_callback_sshauth_passphrase()</a>. Here can the paths to the key files be also specified by nc_set_publickey_path() and nc_set_privatekey_path(). If not set, libnetconf tries to find them in the default paths.</li>
</ul>
</li>
<li>**Connect to the NETCONF server(s)**.<br/>
 Simply call <a class="el" href="db/d52/group__session.html#gae3858d998d19cb2fb700b15fdf602f23" title="Create NETCONF session to the specified server.">nc_session_connect()</a> to connect to the specified host via SSH. Authentication method is selected according to the default values or the previous steps.</li>
<li>**Prepare NETCONF rpc message(s)**.<br/>
 Creating NETCONF rpc messages is covered by the functions described in the section <a class="el" href="db/de9/group__rpc.html">NETCONF rpc</a>. The application prepares NETCONF rpc messages according to the specified attributes. These messages can be then repeatedly used for communication over any of the created NETCONF sessions.</li>
<li>**Send the message to the selected NETCONF server**.<br/>
 To send created NETCONF rpc message to the NETCONF server, use <a class="el" href="db/de9/group__rpc.html#gaeb0d93ea1b5ef0c22c9e5372425fb5c3" title="Send &lt;rpc&gt; request via specified NETCONF session. This function is supposed...">nc_session_send_rpc()</a> function. <a class="el" href="db/de9/group__rpc.html#ga27d3fe78769630932a18c726df4fe6e6" title="Send &lt;rpc&gt; and receive &lt;rpc-reply&gt; via the specified NETCONF session...">nc_session_send_recv()</a> function connects sending and receiving the reply (see the next step) into one blocking call.</li>
<li>**Get the server's rpc-reply message**. When the NETCONF rpc is sent, use <a class="el" href="d0/de2/group__reply.html#ga1b8c8ca9516003938e8f647bd870beaa" title="Receive &lt;rpc-reply&gt; response from the specified NETCONF session. This function...">nc_session_recv_reply()</a> to receive the reply. To learn when the reply is coming, a file descriptor of the communication channel can be checked by poll(), select(), ... This descriptor can be obtained via <a class="el" href="db/d52/group__session.html#ga826890ed745633bc2d31a53971dada32" title="Get the input file descriptor to asynchronous control of input events.">nc_session_get_eventfd()</a> function.</li>
<li>**Close the NETCONF session**.<br/>
 When the communication is done, the NETCONF session should be freed (session is also properly closed) via <a class="el" href="db/d52/group__session.html#gaa5994f45a7031dc931bdf4a3acebedee" title="Cleanup the session structure and free all the allocated resources.">nc_session_free()</a> function.</li>
<li>**Free all created objects**.<br/>
 Do not forget to free created rpc messages (<a class="el" href="db/de9/group__rpc.html#ga4041bda37caa9eedb7a1e2534280f3df" title="Free rpc message.">nc_rpc_free()</a>), <a class="el" href="db/de9/group__rpc.html#ga599c715b0aee0f1f2ed231ce1d78e5bd">filters</a> (<a class="el" href="db/de9/group__rpc.html#ga0dbfd598d6fd303819817370cdf63229" title="Destroy the filter structure.">nc_filter_free()</a>) or received NETCONF rpc-replies (<a class="el" href="d0/de2/group__reply.html#ga17aa9f38d7b75dec1a57b478b0b39710" title="Free reply message.">nc_reply_free()</a>). </li>
</ol>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 8 Dec 2015 for libnetconf by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
